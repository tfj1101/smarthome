#include "hanzi.h"
#include "lcd.h"
#include<stdio.h>
unsigned char hanzi_shi[]= {
    /*--  文字:  视  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x20,0x00,0x11,0xFC,0x11,0x04,0xF9,0x04,0x09,0x24,0x11,0x24,0x11,0x24,0x39,0x24,
0x55,0x24,0x95,0x54,0x10,0x50,0x10,0x90,0x10,0x90,0x11,0x12,0x12,0x12,0x14,0x0E,


};

unsigned char hanzi_ping[] = {
    /*--  文字:  频  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x00,0x11,0xFE,0x50,0x20,0x5C,0x40,0x51,0xFC,0x51,0x04,0xFF,0x24,0x01,0x24,
0x11,0x24,0x55,0x24,0x55,0x24,0x55,0x44,0x84,0x50,0x08,0x88,0x31,0x04,0xC2,0x02,


};

unsigned char hanzi_yue[] = {
    /*--  文字:  乐  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x20,0x00,0xF0,0x1F,0x00,0x10,0x00,0x11,0x00,0x21,0x00,0x21,0x00,0x3F,0xFC,
0x01,0x00,0x09,0x20,0x09,0x10,0x11,0x08,0x21,0x04,0x41,0x04,0x05,0x00,0x02,0x00,

};

unsigned char hanzi_yin[] = {
    /*--  文字:  音  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x01,0x00,0x3F,0xF8,0x00,0x00,0x08,0x20,0x04,0x40,0xFF,0xFE,0x00,0x00,
0x1F,0xF0,0x10,0x10,0x10,0x10,0x1F,0xF0,0x10,0x10,0x10,0x10,0x1F,0xF0,0x10,0x10,

};

unsigned char hanzi_xiang[] = {
    /*--  文字:  相  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x08,0x00,0x08,0xFC,0x08,0x84,0x08,0x84,0xFE,0x84,0x08,0xFC,0x18,0x84,0x1C,0x84,
0x2A,0x84,0x2A,0xFC,0x48,0x84,0x88,0x84,0x08,0x84,0x08,0x84,0x08,0xFC,0x08,0x84,

};

unsigned char hanzi_ce[] = {
    /*--  文字:  册  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x1E,0x78,0x12,0x48,0x12,0x48,0x12,0x48,0x12,0x48,0x12,0x48,0xFF,0xFE,
0x12,0x48,0x12,0x48,0x12,0x48,0x12,0x48,0x12,0x48,0x12,0x88,0x26,0xA8,0x41,0x10,


};

unsigned char dot[] = {
/*--  文字:  .  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x00,0x00

};


unsigned char digtal[][16] = {

/*--  文字:  0  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00},

/*--  文字:  1  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x08,0x38,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x3E,0x00,0x00},

/*--  文字:  2  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x02,0x04,0x08,0x10,0x20,0x42,0x7E,0x00,0x00},

/*--  文字:  3  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x3C,0x42,0x42,0x02,0x04,0x18,0x04,0x02,0x42,0x42,0x3C,0x00,0x00},

/*--  文字:  4  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x04,0x0C,0x0C,0x14,0x24,0x24,0x44,0x7F,0x04,0x04,0x1F,0x00,0x00},

/*--  文字:  5  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x7E,0x40,0x40,0x40,0x78,0x44,0x02,0x02,0x42,0x44,0x38,0x00,0x00},

/*--  文字:  6  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x18,0x24,0x40,0x40,0x5C,0x62,0x42,0x42,0x42,0x22,0x1C,0x00,0x00},

/*--  文字:  7  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x7E,0x42,0x04,0x04,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x00,0x00},

/*--  文字:  8  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3C,0x00,0x00},

/*--  文字:  9  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
{0x00,0x00,0x00,0x38,0x44,0x42,0x42,0x42,0x46,0x3A,0x02,0x02,0x24,0x18,0x00,0x00}

};
unsigned char hanzi_zhi[] = {
/*--  文字:  智  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x0E,0x00,0x00,0x0E,0x30,0x08,0x0F,0xFF,0xFC,0x1D,0xC7,0x1C,0x19,
0xC7,0x1C,0x31,0x9F,0x1C,0x7F,0xFF,0x1C,0x23,0x87,0x1C,0x03,0xE7,0x1C,0x07,0x7F,
0xFC,0x07,0x3F,0x1C,0x1E,0x1F,0x78,0x3B,0xFF,0xF0,0x63,0x80,0xE0,0x03,0x80,0xE0,
0x03,0xFF,0xE0,0x03,0x80,0xE0,0x03,0x80,0xE0,0x03,0x80,0xE0,0x03,0xFF,0xE0,0x03,
0x80,0xE0,0x03,0x00,0xE0,0x00,0x00,0x00,

};

unsigned char hanzi_neng[] = {

/*--  文字:  能  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x03,0x06,0x00,0x07,0x87,0x00,0x07,0x07,0x30,0x0C,0xE7,0x78,0x18,
0x77,0xF0,0x7F,0xFF,0xCC,0x3F,0xFF,0x0C,0x30,0x77,0x0C,0x3F,0xF7,0x0E,0x38,0x67,
0xFE,0x38,0x60,0x00,0x3F,0xE6,0x00,0x38,0x67,0x38,0x38,0x67,0x7C,0x38,0x67,0xF0,
0x3F,0xE7,0xC0,0x38,0x67,0x0C,0x38,0x67,0x0C,0x38,0x67,0x0E,0x38,0x67,0xFE,0x3B,
0xE7,0xFE,0x38,0xE0,0x00,0x00,0x00,0x00,

};

unsigned char hanzi_jia[] = {


/*--  文字:  家  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x78,0x00,0x00,0x3C,0x00,0x18,0x1C,0x0C,0x1F,0xFF,0xFE,0x18,
0x00,0x1C,0x38,0x00,0xD8,0x3F,0xFF,0xE0,0x00,0x70,0x00,0x00,0xF0,0x60,0x01,0xF0,
0xF0,0x07,0xBB,0xC0,0x1E,0x7F,0x80,0x70,0xEF,0x80,0x03,0xDF,0x80,0x07,0xBF,0xC0,
0x1E,0x7E,0xE0,0x70,0xFE,0x70,0x01,0xCE,0x7C,0x07,0x8E,0x3E,0x1E,0xEE,0x08,0x70,
0x7E,0x00,0x00,0x1C,0x00,0x00,0x00,0x00,

};


unsigned char hanzi_ju[] = {

/*--  文字:  居  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xFF,0xF8,0x0E,0x00,0x3C,0x0E,0x00,0x38,0x0E,
0x00,0x38,0x0F,0xFF,0xF8,0x0E,0x0C,0x38,0x0E,0x0E,0x00,0x0E,0x0E,0x00,0x0E,0x0E,
0x0C,0x0F,0xFF,0xFE,0x0F,0x0E,0x00,0x0C,0x0E,0x00,0x1C,0x0E,0x30,0x1D,0xFF,0xF8,
0x1D,0xC0,0x70,0x19,0xC0,0x70,0x39,0xC0,0x70,0x39,0xC0,0x70,0x31,0xFF,0xF0,0x61,
0xC0,0x70,0x41,0x80,0x00,0x00,0x00,0x00,
};
unsigned char hanzi_kong[] = {
/*--  文字:  控  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x0E,0x04,0x00,0x0F,0x07,0x80,0x0E,0x03,0x80,0x0E,0x31,0x8C,0x0F,
0xBF,0xFE,0x7F,0xF0,0x1E,0x0E,0xF4,0x18,0x0E,0x4E,0xE0,0x0E,0x1E,0x78,0x0E,0xF8,
0x3C,0x0F,0xF0,0x1C,0x1F,0xE0,0x3C,0xFE,0x7F,0xF8,0x7E,0x03,0x80,0x0E,0x03,0x80,
0x0E,0x03,0x80,0x0E,0x03,0x80,0x0E,0x03,0x80,0x0E,0x03,0x8C,0x6F,0xFF,0xFE,0x7E,
0x40,0x00,0x1C,0x00,0x00,0x00,0x00,0x00,
};

unsigned char hanzi_zi[] = {

/*--  文字:  制  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x03,0x80,0x1C,0x03,0x80,0x1C,0x1B,0x80,0x1C,0x1F,0x81,0x9C,0x1B,
0x99,0xDC,0x3F,0xFD,0xDC,0x33,0x81,0xDC,0x73,0x8D,0xDC,0x7F,0xFF,0xDC,0x23,0x81,
0xDC,0x03,0x99,0xDC,0x3F,0xFD,0xDC,0x3B,0x9D,0xDC,0x3B,0x9D,0xDC,0x3B,0x9D,0xDC,
0x3B,0x9D,0xDC,0x3B,0x9D,0x9C,0x3B,0xF8,0x1C,0x3B,0xB8,0x1C,0x03,0x80,0xFC,0x03,
0x80,0x7C,0x03,0x80,0x18,0x00,0x00,0x00,
};

unsigned char hanzi_xi[] = {
/*--  文字:  系  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x1F,0xF8,0x1F,0xFF,0x00,0x00,0x3C,0x00,0x00,
0x78,0x00,0x00,0xE0,0xE0,0x03,0xC1,0xF0,0x07,0xFF,0x80,0x07,0xFF,0x00,0x02,0x3D,
0x80,0x00,0xF0,0xE0,0x03,0xC0,0x78,0x0F,0xFF,0xFC,0x0F,0xFC,0x1C,0x00,0x9C,0x18,
0x01,0xDF,0xC0,0x03,0xDC,0xF0,0x07,0x9C,0x78,0x0E,0x1C,0x3C,0x1C,0xFC,0x1C,0x70,
0x7C,0x0C,0x00,0x18,0x00,0x00,0x00,0x00,

};

unsigned char hanzi_tong[] = {
/*--  文字:  统  --*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x07,0x07,0x00,0x07,0x03,0x80,0x0E,0x03,0x8C,0x0E,0x7F,0xFE,0x1C,
0xE3,0x80,0x19,0xE7,0x80,0x39,0xC6,0x40,0x7F,0x8C,0x70,0x77,0x18,0x3C,0x06,0x3F,
0xFC,0x0C,0x3F,0xEC,0x1C,0x3E,0xEC,0x7F,0xCE,0xE0,0x3C,0x0E,0xE0,0x30,0x0E,0xE0,
0x00,0x6E,0xE0,0x0F,0xCE,0xE6,0x7E,0x1C,0xE6,0x78,0x1C,0xEE,0x20,0x38,0xFE,0x00,
0xF0,0xFE,0x01,0xC0,0x00,0x00,0x00,0x00,
};






/*
    hanzi_display： 在屏幕上显示一个汉字
    @x0: 显示区域左上顶点的x轴坐标
    @y0: 显示区域左上顶点的y轴坐标
    @w: 要显示的汉字的宽度(表示一行有多少个像素点)
    @h: 要显示的汉字的高度(表示汉字扫描时有多少行)
    @data: 要显示的汉字的取模数据
    返回值：
        无
        注意： 本函数，仅针对“横向取模”的取模方式
*/
void hanzi_display(int x0, int y0,
                   int w, int h,
                   unsigned char data[])
{

    // 总共要显示多少个像素点呢?
    //   w*h

    // 如果按扫描的顺序依次从0开始给每一个像素点编号,
    // 编号的范围为: [0， w*h)

    // 我的这个函数的任务就是正确的显示这 w*h 个像素点
    int dian; // 表示第 dian 个像素点
              //  dian: [0, w*h)

    int color; // 这个点要显示的颜色
               // 约定：
               //   这个点在 笔划上  显示红色(0xFF0000)
               //   这个点不在 笔划上 显示黑色(0x0)

    for (dian = 0; dian < w * h; dian++)
    {
        // 这个 dian 的取模数据在数组data[]的那个元素中呢?
        int index = dian / 8; // data[index]

        // 那你的数据(只有一个bit)在元素 data[index]的哪一个bit呢?
        int bit = 7 - dian % 8;

        if (data[index] & (1 << bit))
        {
            color = 0x000000;
        }
        else
        {
            color = 0xffffff;
        }

        int x, y; // 设这个点要显示在屏幕上的坐标位置为(x,y )

        // 这个dian在扫描时是 第几行呢?  dian / w
        // 这个dian在扫描时是 第几列呢?  dian % w
        x = x0 + dian % w;
        y = y0 + dian / w;

        lcd_draw_point(x, y, color);
    }
}

// 在屏幕坐标位置(x0,y0)显示一个整数 num
/*
    int_display: 在屏幕上显示一个整数
    @x0: 屏幕显示区域左上顶点的x轴坐标
    @y0: 屏幕显示区域左上顶点的y轴坐标
    @w:  单个数字(如: 0, 1)的宽度
    @h:  单个数字(如: 0, 1)的高度
    @num: 要显示的整数(如: 235)
    返回值：
        最终显示了多少位数字
*/
int int_display(int x0, int y0,
                int w, int h,
                int num)
{
    int wei[10];
    int index = 0;

    do
    {
        wei[index] = num % 10;
        num = num / 10;
        index++;
    }while(num!=0);

    int i ;
    for(int i = index-1;i>=0;i--)
    {
        int n = wei[i];
        hanzi_display(x0,y0,w,h,digtal[n]);
        x0+=w;
    }

    return index;
}

// 在屏幕坐标位置(x0,y0)显示一个 小数
void digtal_display(int x0, int y0, double num)
{
    int zhengshu = (int) num;

    int r = int_display(x0, y0, 8, 16, zhengshu);


    if (num - zhengshu != 0)
    {
        //要显示小数部分

        //1. 显示一个小数点 ...
        x0 += r * 8;

        hanzi_display(x0, y0, 8, 16, dot) ;//显示  . 小数点
        x0 += 8;

        //2. 显示小数部分
        //double xiaoshu = num - zhengshu;
        int x =  (int)(num * 100) % 100;

        printf("%d\n", x);
        int_display(x0, y0, 8, 16, x);
    }
}
